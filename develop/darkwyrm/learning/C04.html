

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>第四课 &mdash; Haiku 中文文档</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Haiku 中文文档" href="../../../index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="../../../index.html" class="icon icon-home"> Haiku Chinese Documents
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../关于Haiku.html">关于 Haiku</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../关于Haiku.html#id1">Haiku 好处在哪儿？</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../关于Haiku.html#id2">为何选择 Haiku ？</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../关于Haiku.html#id3">谁支持着 Haiku ？</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../开发.html">开发</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../开发.html#id2">用户指南</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../开发.html#id3">开发文档</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../开发入门.html">开发入门</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../开发入门.html#id2">手册相关</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../开发入门.html#id3">入门任务</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../开发入门.html#id4">当您找到任务</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../开发入门.html#id5">编写代码准备</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../开发入门.html#git">获取 GIT 提交权限</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../开发入门.html#id6">深入阅读</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../Haiku编程学习.html">Haiku编程学习</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../Haiku编程学习.html#id1">简介</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../Haiku编程学习.html#id2">目录</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../Haiku编程学习.html#id3">参考资料和工具</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../Haiku编程教程.html">Haiku 编程详解</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../Haiku编程教程.html#id1">前言</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../Haiku编程教程.html#id2">内容概览</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../Haiku指南.html">Haiku 指南</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../Haiku指南.html#guides-haiku"><code class="docutils literal"><span class="pre">/guides/构建Haiku</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../Haiku指南.html#id1"><code class="docutils literal"><span class="pre">/guides/安装Haiku</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../Haiku指南.html#id2"><code class="docutils literal"><span class="pre">/guides/启动Haiku</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../Haiku指南.html#guides"><code class="docutils literal"><span class="pre">/guides/日常任务</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../Haiku指南.html#id3"><code class="docutils literal"><span class="pre">/guides/虚拟化</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../Haiku指南.html#id4">其他指南</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../Haiku源码规范.html">Haiku 编码规范</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../Haiku源码规范.html#id2">规范概况</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../Haiku源码规范.html#id3">缩进和空格</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../Haiku源码规范.html#id4">杂项</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../Haiku源码规范.html#id5">标识符</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../Haiku源码规范.html#id6">变量声明</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../Haiku源码规范.html#haiku-api">使用 Haiku 内置的 API，类型等</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../Haiku源码规范.html#id7">注释</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../Haiku源码规范.html#id8">许可和版权</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../Haiku源码规范.html#id9">无用代码和调试代码</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../Haiku源码规范.html#id10">其他的要求</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../Haiku源码规范.html#id11">风格检查工具</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../开发常见问题（FAQ）.html">开发常见问题（FAQ）</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../开发常见问题（FAQ）.html#id1">我是一个程序员，希望可以帮忙，那么从何开始呢？</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../开发常见问题（FAQ）.html#id4">是否有简单的引导任务？</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../开发常见问题（FAQ）.html#id6">是否有特定的编程风格？</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../开发常见问题（FAQ）.html#id7">如何创建和提交补丁？</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../开发常见问题（FAQ）.html#trac">为什么无法在 Trac 中创建任务单？</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../开发常见问题（FAQ）.html#id8">使用哪些开发工具？</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../开发常见问题（FAQ）.html#id9">是否有开发者邮件列表？</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../开发常见问题（FAQ）.html#irc">是否有 IRC 聊天室？</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../开发常见问题（FAQ）.html#id10">我尝试进行测试，但是 Haiku 编译失败。接下来该如何操作？</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../开发常见问题（FAQ）.html#id11">我想把一些东西集成到官方源之中，可以集成那些组件？该使用何种协议呢？</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../开发常见问题（FAQ）.html#beos-haiku">我希望可以把我的 BeOS 程序/驱动移植到 Haiku，该如何进行？</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../Haiku图标指南.html">Haiku 图标指南</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Haiku图标指南.html#id1">透视效果</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Haiku图标指南.html#id2">光源效果</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Haiku图标指南.html#id3">渐变效果</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Haiku图标指南.html#id4">色彩效果</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Haiku图标指南.html#id5">阴影效果</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Haiku图标指南.html#id6">轮廓线</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Haiku图标指南.html#id7">高亮效果</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Haiku图标指南.html#id8">使用覆盖</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Haiku图标指南.html#id9">细节</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Haiku图标指南.html#id10">中立图标</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../开发.html#id4">在线资源</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../开发.html#id7">开发工具</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../开发.html#id8">其他系统交叉编译</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../文档.html">文档</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../文档.html#id2">用户文档</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../文档.html#id3">开发者文档</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../文档.html#id4">早期文档</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../文档.html#bebook-be">BeBook 和 Be 信札</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../文档.html#id5">其他</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">Haiku Chinese Documents</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
    <li>第四课</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="id1">
<h1><a class="toc-backref" href="#id6">第四课</a><a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#id1" id="id6">第四课</a><ul>
<li><a class="reference internal" href="#id2" id="id7">条件语句：选择执行代码</a></li>
<li><a class="reference internal" href="#id3" id="id8">循环语句</a></li>
<li><a class="reference internal" href="#id4" id="id9">概念应用</a></li>
<li><a class="reference internal" href="#id5" id="id10">深入练习</a></li>
</ul>
</li>
</ul>
</div>
<p>如果没有某种方法可以让我们的程序作出适当的选择，加速一些冗长的进程的话，想要写出一些有用的东西将会是极其困难的。在这一节，我们将要开始条件语句和循环语句的学习。</p>
<div class="section" id="id2">
<h2><a class="toc-backref" href="#id7">条件语句：选择执行代码</a><a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h2>
<p>即使在编程之中，也不是所有的东西都是一定的。If-then 逻辑就是可以让程序处理特殊条件的方法之一，就像 <strong>if I see a one-eyed, one-horned flying purple people eater coming my way, then I&#8217;m going the other way.</strong> 。那么让我们尽快来了解下面的内容吧！</p>
<p>一个计算机也可以处理同样的情况，例如，如果某个变量与 10 相等，那么就把另一个变量设置为 false。如果让我们来写这一段代码，如下所示即为所写：</p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="k">if</span> <span class="p">(</span><span class="n">someVariable</span> <span class="o">==</span> <span class="mi">10</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">someOtherVariable</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>条件的声明一定要放在 if 之后的圆括号中。并且要注意不要使用单个等号来判断两个变量的值相等，只有两个等号才可以。在 C 和 C++ 中，单个等号用来把给一个变量进行赋值，两个等号才是用来比较两个值是否相等。如果你忘记了这一用法，那么编译器就会发出警告。尽管你的程序仍然可以进行编译，但是编译器会给出可能出现的编程错误的警告。在圆括号中的条件声明之后是一对大括号括起来的语句，如果条件判断是正确的，那么这里面的语句将会被执行。如果条件是不正确的，程序将会跳过大括号中的语句（换句话说，这里面的内容将不会被执行），直接执行之后的语句。当然我们也可以使用 else 语句对条件判断不正确后所要进行的操作进行指定。</p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="c1">// 如果小龙喷出了火焰。</span>
<span class="k">if</span> <span class="p">(</span><span class="n">dragonBreathesFire</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">//停下来，摘取地上新鲜的蘑菇 。Yum!</span>
    <span class="n">SetSpeedMPH</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
    <span class="n">EquipMarshmallows</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
    <span class="c1">// 如果不是可以喷火的龙，那么就开始战斗。</span>
    <span class="n">DrawSword</span><span class="p">();</span>
    <span class="n">RaiseShield</span><span class="p">();</span>
    <span class="n">myVelocityMPH</span> <span class="o">+=</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>if 声明有许多不同的使用方法。他们可以链接起来使用或者嵌套使用，如果你希望 <strong>Work Smarter, Not Harder（-a.k.a.一个懒惰的程序员）</strong> ，如果只有一条代码要执行，那么你可以不使用花括号将代码包括在里面：</p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="c1">// 下面是if语句的简单用法 - 仅有</span>
<span class="c1">// 一行可以运行的语句。</span>
<span class="k">if</span> <span class="p">(</span><span class="n">someVariable</span> <span class="o">==</span> <span class="mi">10</span><span class="p">)</span>
    <span class="n">someOtherVariable</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="n">PoliceVisible</span><span class="p">())</span>
<span class="p">{</span>
    <span class="n">myStress</span><span class="o">++</span><span class="p">;</span>
    <span class="c1">// 下面是放置在一起的许多if语句。</span>
    <span class="c1">// 每次嵌套低优先级语句时，我们</span>
    <span class="c1">// 需要增加一个级别的缩进量。</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">GetSpeed</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">GetSpeedLimit</span><span class="p">())</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">PoliceLightsFlashing</span><span class="p">())</span>
            <span class="n">SetSpeedMPH</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
        <span class="k">else</span>
            <span class="nf">SetSpeedMPH</span><span class="p">(</span><span class="n">GetSpeedLimit</span><span class="p">());</span>
    <span class="k">else</span>
        <span class="n">myStress</span><span class="o">--</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>在上面的代码中：首先，我们需要检测是否有警察出现；如果有，我们的压力值自然就会增加一些；然后检查我们的车速是否超速。如果没有，我们的压力值就会减小到这之前的程度；如果出于某些原因，车速超限了，那么就需要检查警车的警灯是否在闪，然后减速停车，接受调查。</p>
<p>对不同等级的嵌套使用不同的缩进是一种有目的的编码风格，这可以使你的 <em>if-then</em> 语句逻辑容易理解，帮助你快速判断哪一条指令属于哪一个 if 语句。在使用缩进时有两种方案可供选择：一系列的空格或者使用制表符。为了与其他章节保持一致，这里我们使用制表符，这样做的效果是相同的，但是仅需要很少的输入。再次提倡大家，<em>work smarter，not harder</em> 。</p>
<p>为了给我们的行囊中添加最后一个利器，我们可以使用布尔逻辑操作符 AND、OR、或者 NOT 修改和链接条件语句，并且使用圆括号来区别优先级。对于那些不熟悉的开发者，布尔逻辑只是用于把条件判断链接起来的一种方法，例如，IF 某个条件 AND 其他条件。</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="9%" />
<col width="32%" />
<col width="46%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">布尔值</th>
<th class="head">操作符</th>
<th class="head">示例</th>
<th class="head">描述</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>AND</td>
<td>&amp;&amp;</td>
<td>if(a == 1 &amp;&amp; b == 2)</td>
<td>如果 a 等于 1 并且 b 等于 2</td>
</tr>
<tr class="row-odd"><td>OR</td>
<td>||</td>
<td>if(a == 1 || b == 2)</td>
<td>如果 a 等于 1 或者 b 等于 2</td>
</tr>
<tr class="row-even"><td>NOT</td>
<td>!</td>
<td>if(!(a == 1 || b == 2))</td>
<td>如果相反于 a 等于 1 并且 b 等于 2</td>
</tr>
</tbody>
</table>
<p>需要注意的是，如果您有在if语句中有多个条件语句，把每个条件放置在圆括号中将会使您的代码看起来整洁优雅，除非这些条件语句都非常的短小。</p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="k">if</span><span class="p">((</span><span class="n">a</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">b</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="o">||</span><span class="n">c</span><span class="p">)</span>
     <span class="n">DoSomething</span><span class="p">();</span>
</pre></div>
</div>
<p>本示例表示的意思是“如果条件 a==1 与 b==2 为真或者 c 为非零值，那么就调用 DoSomething()”。在本示例中，整型也可以用于逻辑操作。零被视为假值，而其他的任何数则视为真值，所以在本示例中如果c是除了零以外的其他数，则条件 c 为真。</p>
<p>现在所有这些可能看起来马上可以用于处理很多东西，然而我们现在所学的东西if语句只是用于控制 C++ 程序运行的其他方法的基础。事实上，它还不是很复杂。</p>
</div>
<div class="section" id="id3">
<h2><a class="toc-backref" href="#id8">循环语句</a><a class="headerlink" href="#id3" title="永久链接至标题">¶</a></h2>
<p>循环语句是 C 和 C++ 程序的一个特性，在循环语句中，当某个条件为真时，程序将会重复的执行一系列的指令。C++ 中有几种不同的循环格式，但是在这一节，我们只探讨其中的一类：for 循环。那么接下来我们来看一段代码，然后查看其中的细节。</p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
   <span class="kt">int</span> <span class="n">number</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="c1">// 下面是for循环语句</span>
   <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
   <span class="p">{</span>
         <span class="n">number</span> <span class="o">+=</span> <span class="n">i</span><span class="p">;</span>
         <span class="n">printf</span><span class="p">(</span><span class="s">&quot;At step %d, the number is now %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">number</span><span class="p">);</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>当我们运行这个程序时，它会打印出如下内容：</p>
<div class="highlight-sh"><div class="highlight"><pre>At step 1, the number is now 1
At step 2, the number is now 3
At step 3, the number is now 6
At step 4, the number is now 10
At step 5, the number is now 15
At step 6, the number is now 21
At step 7, the number is now 28
At step 8, the number is now 36
At step 9, the number is now 45
</pre></div>
</div>
<p>我们的 for 循环有两个部分：圆括号中的控制部分和大括号中的重复指令部分。for 循环的控制部分又可分为三个部分：初始化，循环条件，以及步进值。各个部分之间由分号隔开。</p>
<p>初始化部分为循环初值赋予一个变量。我们可以在循环的该部分声明变量或者使用已经进行了声明的变量。通常，我们在循环的该部分声明索引变量，而且在许多程序员将会在简单循环中使用小写字符 i (index的缩写)来表示索引变量。</p>
<p>循环条件是一个表达式，当条件为真时，循环语句将会重复执行。在本示例中，如果 i 小于 10，那么循环将会一直重复执行。步进值是一个不断调整索引值的表达式。在多数情况下，如本示例中，我们只需要索引值每次加一即可，但是我们也可以使用任何的数学表达式－如果我们希望 i 每次自加 2，则可以将其修改为`i += 2`。与其他 C 和 C++ 运算一样，在构建 for 循环时，可以允许有很大的灵活度，但是在这里我们将会保持编程的简洁性。</p>
</div>
<div class="section" id="id4">
<h2><a class="toc-backref" href="#id9">概念应用</a><a class="headerlink" href="#id4" title="永久链接至标题">¶</a></h2>
<p>那么接下来我们将要把本节所学的内容应用到更加实用的地方。当您从银行取得汽车抵押贷款之后，您可能需要知道将来的付款是多少，那么接下来，我们就创建一个函数来计算付款的数额。下面是用于计算该付款数额的表达式：</p>
<p>这个式子显然是一个专用的函数，可能看起来很复杂。那么我们就把这个可能有点混乱的数学式子解释为我们可以容易理解的内容。</p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="cp">#include &lt;math.h&gt;</span>

<span class="kt">float</span> <span class="nf">Payment</span><span class="p">(</span><span class="kt">float</span> <span class="n">principal</span><span class="p">,</span> <span class="kt">float</span> <span class="n">rate</span><span class="p">,</span> <span class="kt">int</span> <span class="n">months</span><span class="p">)</span>
<span class="p">{</span>
   <span class="kt">float</span> <span class="n">top</span><span class="p">,</span> <span class="n">bottom</span><span class="p">;</span>

   <span class="c1">// 下面这一行用于计算右边表达式的顶端部分。</span>
   <span class="n">top</span> <span class="o">=</span> <span class="n">principal</span> <span class="o">*</span> <span class="p">(</span><span class="n">rate</span> <span class="o">/</span> <span class="mf">12.0</span><span class="p">);</span>
   <span class="c1">// 而下面一行则用于计算右边表达式的底端部分。</span>
   <span class="n">bottom</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">pow</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="p">(</span><span class="n">rate</span> <span class="o">/</span> <span class="mf">12.0</span><span class="p">),</span><span class="o">-</span><span class="n">months</span><span class="p">);</span>

   <span class="k">return</span> <span class="p">(</span><span class="n">top</span> <span class="o">/</span> <span class="n">bottom</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>把一个表达式表示为函数，就是要把它分为几个可以控制的部分。我们分别计算了两部分的结果，然后分别把结果赋值给两个不同的变量。这样做可以使我们的代码易于阅读和调试。</p>
<p>需要注意的是，我们使用了 12.0 而不是 12 来强制编译器将 12 转换为浮点型数据而不是整型。在处理整型的运算时，编译器将会舍弃小数点后的结果，例如，10/4 的结果为 2，而 10.0/4.0 的结果则为 2.5。在这种情况下，如果我们希望避免四舍五入的错误，我们必须使用 12.0 而不是 12。</p>
<p>当然我们也可以在一行语句中完成所有的计算，但是它将非常难懂，而且调试时很让人头疼。如下所示：</p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="k">return</span> <span class="p">(</span><span class="n">principal</span> <span class="o">*</span> <span class="n">rate</span> <span class="o">/</span> <span class="mf">12.0</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">pow</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="p">(</span><span class="n">rate</span> <span class="o">/</span> <span class="mf">12.0</span><span class="p">),</span><span class="o">-</span><span class="n">months</span><span class="p">)</span> <span class="p">);</span>
</pre></div>
</div>
<p>这很让人讨厌。但是一些资深的程序员可能推崇这种做法，因为代码将会非常短小紧凑；但是易于阅读，容易维护的代码将更加重要。既然我们已经可以让这个函数来计算付款数额，那么我们可以使用它来计算持续1至5年的汽车贷款月费用。</p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cp">#include &lt;math.h&gt;</span>

<span class="kt">float</span> <span class="nf">Payment</span><span class="p">(</span><span class="kt">float</span> <span class="n">principal</span><span class="p">,</span> <span class="kt">float</span> <span class="n">rate</span><span class="p">,</span> <span class="kt">int</span> <span class="n">months</span><span class="p">)</span>
<span class="p">{</span>
   <span class="kt">float</span> <span class="n">top</span><span class="p">,</span> <span class="n">bottom</span><span class="p">;</span>
   <span class="n">top</span> <span class="o">=</span> <span class="n">principal</span> <span class="o">*</span> <span class="p">(</span><span class="n">rate</span> <span class="o">/</span> <span class="mf">12.0</span><span class="p">);</span>
   <span class="n">bottom</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">pow</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="p">(</span><span class="n">rate</span> <span class="o">/</span> <span class="mf">12.0</span><span class="p">),</span><span class="o">-</span><span class="n">months</span><span class="p">);</span>
   <span class="k">return</span> <span class="p">(</span><span class="n">top</span> <span class="o">/</span> <span class="n">bottom</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
   <span class="kt">float</span> <span class="n">principal</span><span class="p">,</span> <span class="n">rate</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">months</span><span class="p">;</span>
   <span class="n">principal</span> <span class="o">=</span> <span class="mf">10000.0</span><span class="p">;</span>
   <span class="n">rate</span> <span class="o">=</span> <span class="mf">.05</span><span class="p">;</span>

   <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">months</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span> <span class="n">months</span> <span class="o">&lt;=</span> <span class="mi">60</span><span class="p">;</span> <span class="n">months</span> <span class="o">+=</span> <span class="mi">12</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="c1">// 由于空格对编译器没有影响，我们可以将长的代码行</span>
       <span class="c1">// 分割成短小的代码行，从而提高代码的可读性。</span>
       <span class="n">printf</span><span class="p">(</span><span class="s">&quot;The monthly payment for a %d month, $%f car loan &quot;</span>
              <span class="s">&quot;at %f%% is $%f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">months</span><span class="p">,</span> <span class="n">principal</span><span class="p">,</span> <span class="n">rate</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span>
               <span class="n">Payment</span><span class="p">(</span><span class="n">principal</span><span class="p">,</span><span class="n">rate</span><span class="p">,</span><span class="n">months</span><span class="p">));</span>
   <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>它可以很好的执行！运行该函数时，它将会显示一年的抵押贷款是很昂贵的，而4至5年的贷款则可以更容易的接受。</p>
</div>
<div class="section" id="id5">
<h2><a class="toc-backref" href="#id10">深入练习</a><a class="headerlink" href="#id5" title="永久链接至标题">¶</a></h2>
<p>尝试使用下面的数字进行练习，查看结果如何，例如，如果循环条件从 60 修改为 72，或者原始本金为 $20000 而不是 $10000。</p>
</div>
</div>


          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; 版权所有 2015, Haiku Chinese Group.
      最后更新于 Aug 18, 2016.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../../_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>